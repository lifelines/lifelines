## Process this file with automake to produce Makefile.in
## (configure will process the resulting Makefile.in to produce Makefile)

# AUTOMAKE_OPTIONS = no-dependencies

# what are we going to build?
bin_PROGRAMS = btedit dbverify lldump lltest xterm_decode

# what goes into btedit, dbverify and lltest?
btedit_SOURCES = btedit.c wprintf.c
dbverify_SOURCES = dbverify.c wprintf.c
lltest_SOURCES = lltest.c wprintf.c
lldump_SOURCES = lldump.c wprintf.c misc.c
xterm_decode_SOURCES = xterm_decode.c

# what libraries do btedit, dbverify and lltest need?
btedit_LDADD = ../gedlib/libgedcom.a ../btree/libbtree.a \
	../stdlib/libstdlib.a

dbverify_LDADD = ../gedlib/libgedcom.a ../btree/libbtree.a \
	../stdlib/libstdlib.a ../arch/libarch.a

lldump_LDADD = ../gedlib/libgedcom.a ../btree/libbtree.a \
	../stdlib/libstdlib.a ../arch/libarch.a

lltest_LDADD = ../gedlib/libgedcom.a ../btree/libbtree.a \
	../stdlib/libstdlib.a

# add static/shared libintl/libiconv
if WITH_STATIC_NLS
btedit_LDADD += @LIBINTL@ @LIBICONV@
dbverify_LDADD += @LIBINTL@ @LIBICONV@
lldump_LDADD += @LIBINTL@ @LIBICONV@
lltest_LDADD += @LIBINTL@ @LIBICONV@
else
btedit_LDADD += @LTLIBINTL@ @LTLIBICONV@
dbverify_LDADD += @LTLIBINTL@ @LTLIBICONV@
lldump_LDADD += @LTLIBINTL@ @LTLIBICONV@
lltest_LDADD += @LTLIBINTL@ @LTLIBICONV@
endif

# $(top_builddir)        for config.h
# $(top_srcdir)/src/hdrs for headers

AM_CPPFLAGS=-I$(top_builddir) -I$(top_srcdir)/src/hdrs

# Locale stuff for gettext
DEFS = -DLOCALEDIR=\"$(localedir)\" @DEFS@
# End stuff for gettext

# these dependencies are so that building parts ('make btedit' or 'make
# lines') will work

../btree/libbtree.a :
	$(MAKE) -C ../btree libbtree.a

../stdlib/libstdlib.a :
	$(MAKE) -C ../stdlib libstdlib.a

../gedlib/libgedcom.a :
	$(MAKE) -C ../gedlib libgedcom.a

../arch/libarch.a :
	$(MAKE) -C ../arch libarch.a

# since we're not doing dependencies automagically...
btedit.o: ../hdrs/standard.h ../hdrs/mystring.h ../hdrs/btree.h
dbverify.o: ../hdrs/standard.h ../hdrs/btree.h ../hdrs/gedcom.h
lldump.o: ../hdrs/standard.h ../hdrs/mystring.h ../hdrs/btree.h
lltest.o: ../hdrs/standard.h ../hdrs/mystring.h ../hdrs/btree.h
